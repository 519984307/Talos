ARM GAS  /var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"battery_level.c"
  14              		.section	.text.port_lock,"ax",%progbits
  15              		.align	1
  16              		.syntax unified
  17              		.thumb
  18              		.thumb_func
  19              		.fpu fpv4-sp-d16
  20              		.type	port_lock, %function
  21              	port_lock:
  22              		@ args = 0, pretend = 0, frame = 8
  23              		@ frame_needed = 1, uses_anonymous_args = 0
  24              		@ link register save eliminated.
  25 0000 80B4     		push	{r7}
  26 0002 83B0     		sub	sp, sp, #12
  27 0004 00AF     		add	r7, sp, #0
  28 0006 2023     		movs	r3, #32
  29 0008 7B60     		str	r3, [r7, #4]
  30 000a 7B68     		ldr	r3, [r7, #4]
  31              		.syntax unified
  32              	@ 546 "../e-puck2_main-processor/ChibiOS//os/ext/CMSIS/include/core_cmFunc.h" 1
  33 000c 83F31188 		MSR basepri, r3
  34              	@ 0 "" 2
  35              		.thumb
  36              		.syntax unified
  37 0010 00BF     		nop
  38 0012 0C37     		adds	r7, r7, #12
  39 0014 BD46     		mov	sp, r7
  40              		@ sp needed
  41 0016 5DF8047B 		ldr	r7, [sp], #4
  42 001a 7047     		bx	lr
  43              		.size	port_lock, .-port_lock
  44              		.section	.text.port_unlock,"ax",%progbits
  45              		.align	1
  46              		.syntax unified
  47              		.thumb
  48              		.thumb_func
  49              		.fpu fpv4-sp-d16
  50              		.type	port_unlock, %function
  51              	port_unlock:
  52              		@ args = 0, pretend = 0, frame = 8
  53              		@ frame_needed = 1, uses_anonymous_args = 0
  54              		@ link register save eliminated.
  55 0000 80B4     		push	{r7}
  56 0002 83B0     		sub	sp, sp, #12
  57 0004 00AF     		add	r7, sp, #0
ARM GAS  /var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s 			page 2


  58 0006 0023     		movs	r3, #0
  59 0008 7B60     		str	r3, [r7, #4]
  60 000a 7B68     		ldr	r3, [r7, #4]
  61              		.syntax unified
  62              	@ 546 "../e-puck2_main-processor/ChibiOS//os/ext/CMSIS/include/core_cmFunc.h" 1
  63 000c 83F31188 		MSR basepri, r3
  64              	@ 0 "" 2
  65              		.thumb
  66              		.syntax unified
  67 0010 00BF     		nop
  68 0012 0C37     		adds	r7, r7, #12
  69 0014 BD46     		mov	sp, r7
  70              		@ sp needed
  71 0016 5DF8047B 		ldr	r7, [sp], #4
  72 001a 7047     		bx	lr
  73              		.size	port_unlock, .-port_unlock
  74              		.section	.text.port_lock_from_isr,"ax",%progbits
  75              		.align	1
  76              		.syntax unified
  77              		.thumb
  78              		.thumb_func
  79              		.fpu fpv4-sp-d16
  80              		.type	port_lock_from_isr, %function
  81              	port_lock_from_isr:
  82              		@ args = 0, pretend = 0, frame = 0
  83              		@ frame_needed = 1, uses_anonymous_args = 0
  84 0000 80B5     		push	{r7, lr}
  85 0002 00AF     		add	r7, sp, #0
  86 0004 FFF7FEFF 		bl	port_lock
  87 0008 00BF     		nop
  88 000a 80BD     		pop	{r7, pc}
  89              		.size	port_lock_from_isr, .-port_lock_from_isr
  90              		.section	.text.port_unlock_from_isr,"ax",%progbits
  91              		.align	1
  92              		.syntax unified
  93              		.thumb
  94              		.thumb_func
  95              		.fpu fpv4-sp-d16
  96              		.type	port_unlock_from_isr, %function
  97              	port_unlock_from_isr:
  98              		@ args = 0, pretend = 0, frame = 0
  99              		@ frame_needed = 1, uses_anonymous_args = 0
 100 0000 80B5     		push	{r7, lr}
 101 0002 00AF     		add	r7, sp, #0
 102 0004 FFF7FEFF 		bl	port_unlock
 103 0008 00BF     		nop
 104 000a 80BD     		pop	{r7, pc}
 105              		.size	port_unlock_from_isr, .-port_unlock_from_isr
 106              		.section	.text.chSysLockFromISR,"ax",%progbits
 107              		.align	1
 108              		.syntax unified
 109              		.thumb
 110              		.thumb_func
 111              		.fpu fpv4-sp-d16
 112              		.type	chSysLockFromISR, %function
 113              	chSysLockFromISR:
 114              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s 			page 3


 115              		@ frame_needed = 1, uses_anonymous_args = 0
 116 0000 80B5     		push	{r7, lr}
 117 0002 00AF     		add	r7, sp, #0
 118 0004 FFF7FEFF 		bl	port_lock_from_isr
 119 0008 FFF7FEFF 		bl	_stats_start_measure_crit_isr
 120 000c FFF7FEFF 		bl	_dbg_check_lock_from_isr
 121 0010 00BF     		nop
 122 0012 80BD     		pop	{r7, pc}
 123              		.size	chSysLockFromISR, .-chSysLockFromISR
 124              		.section	.text.chSysUnlockFromISR,"ax",%progbits
 125              		.align	1
 126              		.syntax unified
 127              		.thumb
 128              		.thumb_func
 129              		.fpu fpv4-sp-d16
 130              		.type	chSysUnlockFromISR, %function
 131              	chSysUnlockFromISR:
 132              		@ args = 0, pretend = 0, frame = 0
 133              		@ frame_needed = 1, uses_anonymous_args = 0
 134 0000 80B5     		push	{r7, lr}
 135 0002 00AF     		add	r7, sp, #0
 136 0004 FFF7FEFF 		bl	_dbg_check_unlock_from_isr
 137 0008 FFF7FEFF 		bl	_stats_stop_measure_crit_isr
 138 000c FFF7FEFF 		bl	port_unlock_from_isr
 139 0010 00BF     		nop
 140 0012 80BD     		pop	{r7, pc}
 141              		.size	chSysUnlockFromISR, .-chSysUnlockFromISR
 142              		.section	.text.chRegSetThreadName,"ax",%progbits
 143              		.align	1
 144              		.syntax unified
 145              		.thumb
 146              		.thumb_func
 147              		.fpu fpv4-sp-d16
 148              		.type	chRegSetThreadName, %function
 149              	chRegSetThreadName:
 150              		@ args = 0, pretend = 0, frame = 8
 151              		@ frame_needed = 1, uses_anonymous_args = 0
 152              		@ link register save eliminated.
 153 0000 80B4     		push	{r7}
 154 0002 83B0     		sub	sp, sp, #12
 155 0004 00AF     		add	r7, sp, #0
 156 0006 7860     		str	r0, [r7, #4]
 157 0008 044B     		ldr	r3, .L8
 158 000a 9B69     		ldr	r3, [r3, #24]
 159 000c 7A68     		ldr	r2, [r7, #4]
 160 000e 9A61     		str	r2, [r3, #24]
 161 0010 00BF     		nop
 162 0012 0C37     		adds	r7, r7, #12
 163 0014 BD46     		mov	sp, r7
 164              		@ sp needed
 165 0016 5DF8047B 		ldr	r7, [sp], #4
 166 001a 7047     		bx	lr
 167              	.L9:
 168              		.align	2
 169              	.L8:
 170 001c 00000000 		.word	ch
 171              		.size	chRegSetThreadName, .-chRegSetThreadName
ARM GAS  /var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s 			page 4


 172              		.section	.text.chBSemWait,"ax",%progbits
 173              		.align	1
 174              		.syntax unified
 175              		.thumb
 176              		.thumb_func
 177              		.fpu fpv4-sp-d16
 178              		.type	chBSemWait, %function
 179              	chBSemWait:
 180              		@ args = 0, pretend = 0, frame = 8
 181              		@ frame_needed = 1, uses_anonymous_args = 0
 182 0000 80B5     		push	{r7, lr}
 183 0002 82B0     		sub	sp, sp, #8
 184 0004 00AF     		add	r7, sp, #0
 185 0006 7860     		str	r0, [r7, #4]
 186 0008 7B68     		ldr	r3, [r7, #4]
 187 000a 1846     		mov	r0, r3
 188 000c FFF7FEFF 		bl	chSemWait
 189 0010 0346     		mov	r3, r0
 190 0012 1846     		mov	r0, r3
 191 0014 0837     		adds	r7, r7, #8
 192 0016 BD46     		mov	sp, r7
 193              		@ sp needed
 194 0018 80BD     		pop	{r7, pc}
 195              		.size	chBSemWait, .-chBSemWait
 196              		.section	.text.chBSemSignalI,"ax",%progbits
 197              		.align	1
 198              		.syntax unified
 199              		.thumb
 200              		.thumb_func
 201              		.fpu fpv4-sp-d16
 202              		.type	chBSemSignalI, %function
 203              	chBSemSignalI:
 204              		@ args = 0, pretend = 0, frame = 8
 205              		@ frame_needed = 1, uses_anonymous_args = 0
 206 0000 80B5     		push	{r7, lr}
 207 0002 82B0     		sub	sp, sp, #8
 208 0004 00AF     		add	r7, sp, #0
 209 0006 7860     		str	r0, [r7, #4]
 210 0008 FFF7FEFF 		bl	chDbgCheckClassI
 211 000c 7B68     		ldr	r3, [r7, #4]
 212 000e 9B68     		ldr	r3, [r3, #8]
 213 0010 002B     		cmp	r3, #0
 214 0012 03DC     		bgt	.L14
 215 0014 7B68     		ldr	r3, [r7, #4]
 216 0016 1846     		mov	r0, r3
 217 0018 FFF7FEFF 		bl	chSemSignalI
 218              	.L14:
 219 001c 00BF     		nop
 220 001e 0837     		adds	r7, r7, #8
 221 0020 BD46     		mov	sp, r7
 222              		@ sp needed
 223 0022 80BD     		pop	{r7, pc}
 224              		.size	chBSemSignalI, .-chBSemSignalI
 225              		.section	.bss.adc_value,"aw",%nobits
 226              		.align	2
 227              		.type	adc_value, %object
 228              		.size	adc_value, 4
ARM GAS  /var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s 			page 5


 229              	adc_value:
 230 0000 00000000 		.space	4
 231              		.section	.bss.adc_samples,"aw",%nobits
 232              		.align	2
 233              		.type	adc_samples, %object
 234              		.size	adc_samples, 64
 235              	adc_samples:
 236 0000 00000000 		.space	64
 236      00000000 
 236      00000000 
 236      00000000 
 236      00000000 
 237              		.section	.data.measurement_ready,"aw",%progbits
 238              		.align	2
 239              		.type	measurement_ready, %object
 240              		.size	measurement_ready, 12
 241              	measurement_ready:
 242 0000 00000000 		.word	measurement_ready
 243 0004 00000000 		.word	measurement_ready
 244 0008 00000000 		.word	0
 245              		.section	.bss.battery_value,"aw",%nobits
 246              		.align	2
 247              		.type	battery_value, %object
 248              		.size	battery_value, 12
 249              	battery_value:
 250 0000 00000000 		.space	12
 250      00000000 
 250      00000000 
 251              		.section	.rodata.group,"a",%progbits
 252              		.align	2
 253              		.type	group, %object
 254              		.size	group, 40
 255              	group:
 256 0000 00       		.byte	0
 257 0001 00       		.space	1
 258 0002 0100     		.short	1
 259 0004 00000000 		.word	adc_cb
 260 0008 00000000 		.word	0
 261 000c 00000000 		.word	0
 262 0010 00000040 		.word	1073741824
 263 0014 00000000 		.word	0
 264 0018 38000000 		.word	56
 265 001c 00000000 		.word	0
 266 0020 00000000 		.word	0
 267 0024 01000000 		.word	1
 268              		.section	.text.adc_cb,"ax",%progbits
 269              		.align	1
 270              		.syntax unified
 271              		.thumb
 272              		.thumb_func
 273              		.fpu fpv4-sp-d16
 274              		.type	adc_cb, %function
 275              	adc_cb:
 276              		@ args = 0, pretend = 0, frame = 24
 277              		@ frame_needed = 1, uses_anonymous_args = 0
 278 0000 80B5     		push	{r7, lr}
 279 0002 86B0     		sub	sp, sp, #24
ARM GAS  /var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s 			page 6


 280 0004 00AF     		add	r7, sp, #0
 281 0006 F860     		str	r0, [r7, #12]
 282 0008 B960     		str	r1, [r7, #8]
 283 000a 7A60     		str	r2, [r7, #4]
 284 000c 174B     		ldr	r3, .L18
 285 000e 0022     		movs	r2, #0
 286 0010 1A60     		str	r2, [r3]
 287 0012 0023     		movs	r3, #0
 288 0014 7B61     		str	r3, [r7, #20]
 289 0016 0DE0     		b	.L16
 290              	.L17:
 291 0018 7B69     		ldr	r3, [r7, #20]
 292 001a 5B00     		lsls	r3, r3, #1
 293 001c BA68     		ldr	r2, [r7, #8]
 294 001e 1344     		add	r3, r3, r2
 295 0020 1B88     		ldrh	r3, [r3]
 296 0022 1A46     		mov	r2, r3
 297 0024 114B     		ldr	r3, .L18
 298 0026 1B68     		ldr	r3, [r3]
 299 0028 1344     		add	r3, r3, r2
 300 002a 104A     		ldr	r2, .L18
 301 002c 1360     		str	r3, [r2]
 302 002e 7B69     		ldr	r3, [r7, #20]
 303 0030 0133     		adds	r3, r3, #1
 304 0032 7B61     		str	r3, [r7, #20]
 305              	.L16:
 306 0034 7A69     		ldr	r2, [r7, #20]
 307 0036 7B68     		ldr	r3, [r7, #4]
 308 0038 9A42     		cmp	r2, r3
 309 003a EDD3     		bcc	.L17
 310 003c 0B4B     		ldr	r3, .L18
 311 003e 1A68     		ldr	r2, [r3]
 312 0040 7B68     		ldr	r3, [r7, #4]
 313 0042 B2FBF3F3 		udiv	r3, r2, r3
 314 0046 094A     		ldr	r2, .L18
 315 0048 1360     		str	r3, [r2]
 316 004a FFF7FEFF 		bl	chSysLockFromISR
 317 004e 2023     		movs	r3, #32
 318 0050 074A     		ldr	r2, .L18+4
 319 0052 0849     		ldr	r1, .L18+8
 320 0054 0848     		ldr	r0, .L18+12
 321 0056 FFF7FEFF 		bl	adcStartConversionI
 322 005a 0848     		ldr	r0, .L18+16
 323 005c FFF7FEFF 		bl	chBSemSignalI
 324 0060 FFF7FEFF 		bl	chSysUnlockFromISR
 325 0064 00BF     		nop
 326 0066 1837     		adds	r7, r7, #24
 327 0068 BD46     		mov	sp, r7
 328              		@ sp needed
 329 006a 80BD     		pop	{r7, pc}
 330              	.L19:
 331              		.align	2
 332              	.L18:
 333 006c 00000000 		.word	adc_value
 334 0070 00000000 		.word	adc_samples
 335 0074 00000000 		.word	group
 336 0078 00000000 		.word	ADCD3
ARM GAS  /var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s 			page 7


 337 007c 00000000 		.word	measurement_ready
 338              		.size	adc_cb, .-adc_cb
 339              		.section	.rodata
 340              		.align	2
 341              	.LC0:
 342 0000 42617474 		.ascii	"Battery Thd\000"
 342      65727920 
 342      54686400 
 343              		.align	2
 344              	.LC1:
 345 000c 2F626174 		.ascii	"/battery_level\000"
 345      74657279 
 345      5F6C6576 
 345      656C00
 346              		.section	.text.battery_thd,"ax",%progbits
 347              		.align	1
 348              		.syntax unified
 349              		.thumb
 350              		.thumb_func
 351              		.fpu fpv4-sp-d16
 352              		.type	battery_thd, %function
 353              	battery_thd:
 354              		@ args = 0, pretend = 0, frame = 136
 355              		@ frame_needed = 1, uses_anonymous_args = 0
 356 0000 80B5     		push	{r7, lr}
 357 0002 A4B0     		sub	sp, sp, #144
 358 0004 02AF     		add	r7, sp, #8
 359 0006 7860     		str	r0, [r7, #4]
 360 0008 4748     		ldr	r0, .L24
 361 000a FFF7FEFF 		bl	chRegSetThreadName
 362 000e 07F11403 		add	r3, r7, #20
 363 0012 7B61     		str	r3, [r7, #20]
 364 0014 07F11403 		add	r3, r7, #20
 365 0018 BB61     		str	r3, [r7, #24]
 366 001a 0023     		movs	r3, #0
 367 001c FB61     		str	r3, [r7, #28]
 368 001e 0023     		movs	r3, #0
 369 0020 3B62     		str	r3, [r7, #32]
 370 0022 0023     		movs	r3, #0
 371 0024 7B62     		str	r3, [r7, #36]
 372 0026 07F10C03 		add	r3, r7, #12
 373 002a FB60     		str	r3, [r7, #12]
 374 002c 07F10C03 		add	r3, r7, #12
 375 0030 3B61     		str	r3, [r7, #16]
 376 0032 07F10C02 		add	r2, r7, #12
 377 0036 07F11401 		add	r1, r7, #20
 378 003a 07F12800 		add	r0, r7, #40
 379 003e 0C23     		movs	r3, #12
 380 0040 0093     		str	r3, [sp]
 381 0042 3A4B     		ldr	r3, .L24+4
 382 0044 FFF7FEFF 		bl	messagebus_topic_init
 383 0048 07F12803 		add	r3, r7, #40
 384 004c 384A     		ldr	r2, .L24+8
 385 004e 1946     		mov	r1, r3
 386 0050 3848     		ldr	r0, .L24+12
 387 0052 FFF7FEFF 		bl	messagebus_advertise_topic
 388 0056 0123     		movs	r3, #1
ARM GAS  /var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s 			page 8


 389 0058 87F88730 		strb	r3, [r7, #135]
 390 005c 3648     		ldr	r0, .L24+16
 391 005e FFF7FEFF 		bl	adcAcquireBus
 392 0062 2023     		movs	r3, #32
 393 0064 354A     		ldr	r2, .L24+20
 394 0066 3649     		ldr	r1, .L24+24
 395 0068 3348     		ldr	r0, .L24+16
 396 006a FFF7FEFF 		bl	adcStartConversion
 397              	.L23:
 398 006e 3548     		ldr	r0, .L24+28
 399 0070 FFF7FEFF 		bl	chBSemWait
 400 0074 97F88730 		ldrb	r3, [r7, #135]	@ zero_extendqisi2
 401 0078 002B     		cmp	r3, #0
 402 007a 08D0     		beq	.L21
 403 007c 0023     		movs	r3, #0
 404 007e 87F88730 		strb	r3, [r7, #135]
 405 0082 314B     		ldr	r3, .L24+32
 406 0084 1B68     		ldr	r3, [r3]
 407 0086 9AB2     		uxth	r2, r3
 408 0088 284B     		ldr	r3, .L24+4
 409 008a 1A81     		strh	r2, [r3, #8]	@ movhi
 410 008c 1CE0     		b	.L22
 411              	.L21:
 412 008e 274B     		ldr	r3, .L24+4
 413 0090 1B89     		ldrh	r3, [r3, #8]
 414 0092 07EE903A 		vmov	s15, r3	@ int
 415 0096 F8EE677A 		vcvt.f32.u32	s15, s15
 416 009a 9FED2C7A 		vldr.32	s14, .L24+36
 417 009e 27EE877A 		vmul.f32	s14, s15, s14
 418 00a2 294B     		ldr	r3, .L24+32
 419 00a4 1B68     		ldr	r3, [r3]
 420 00a6 07EE903A 		vmov	s15, r3	@ int
 421 00aa F8EE677A 		vcvt.f32.u32	s15, s15
 422 00ae DFED286A 		vldr.32	s13, .L24+40
 423 00b2 67EEA67A 		vmul.f32	s15, s15, s13
 424 00b6 77EE277A 		vadd.f32	s15, s14, s15
 425 00ba FCEEE77A 		vcvt.u32.f32	s15, s15
 426 00be 17EE903A 		vmov	r3, s15	@ int
 427 00c2 9AB2     		uxth	r2, r3
 428 00c4 194B     		ldr	r3, .L24+4
 429 00c6 1A81     		strh	r2, [r3, #8]	@ movhi
 430              	.L22:
 431 00c8 184B     		ldr	r3, .L24+4
 432 00ca 1B89     		ldrh	r3, [r3, #8]
 433 00cc 07EE903A 		vmov	s15, r3	@ int
 434 00d0 B8EEE77A 		vcvt.f32.s32	s14, s15
 435 00d4 DFED1F6A 		vldr.32	s13, .L24+44
 436 00d8 C7EE267A 		vdiv.f32	s15, s14, s13
 437 00dc 134B     		ldr	r3, .L24+4
 438 00de C3ED007A 		vstr.32	s15, [r3]
 439 00e2 124B     		ldr	r3, .L24+4
 440 00e4 D3ED007A 		vldr.32	s15, [r3]
 441 00e8 9FED1B7A 		vldr.32	s14, .L24+48
 442 00ec 77EEC77A 		vsub.f32	s15, s15, s14
 443 00f0 9FED1A7A 		vldr.32	s14, .L24+52
 444 00f4 27EE877A 		vmul.f32	s14, s15, s14
 445 00f8 DFED196A 		vldr.32	s13, .L24+56
ARM GAS  /var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s 			page 9


 446 00fc C7EE267A 		vdiv.f32	s15, s14, s13
 447 0100 9FED187A 		vldr.32	s14, .L24+60
 448 0104 77EE877A 		vadd.f32	s15, s15, s14
 449 0108 084B     		ldr	r3, .L24+4
 450 010a C3ED017A 		vstr.32	s15, [r3, #4]
 451 010e 07F12803 		add	r3, r7, #40
 452 0112 0C22     		movs	r2, #12
 453 0114 0549     		ldr	r1, .L24+4
 454 0116 1846     		mov	r0, r3
 455 0118 FFF7FEFF 		bl	messagebus_topic_publish
 456 011c 4FF4FA70 		mov	r0, #500
 457 0120 FFF7FEFF 		bl	chThdSleep
 458 0124 A3E7     		b	.L23
 459              	.L25:
 460 0126 00BF     		.align	2
 461              	.L24:
 462 0128 00000000 		.word	.LC0
 463 012c 00000000 		.word	battery_value
 464 0130 0C000000 		.word	.LC1
 465 0134 00000000 		.word	bus
 466 0138 00000000 		.word	ADCD3
 467 013c 00000000 		.word	adc_samples
 468 0140 00000000 		.word	group
 469 0144 00000000 		.word	measurement_ready
 470 0148 00000000 		.word	adc_value
 471 014c CDCC4C3F 		.word	1061997773
 472 0150 CDCC4C3E 		.word	1045220557
 473 0154 CDCC4C44 		.word	1145883853
 474 0158 9A995940 		.word	1079613850
 475 015c 0000C842 		.word	1120403456
 476 0160 C8CC4C3F 		.word	1061997768
 477 0164 00000000 		.word	0
 478              		.size	battery_thd, .-battery_thd
 479              		.section	.text.battery_level_start,"ax",%progbits
 480              		.align	1
 481              		.global	battery_level_start
 482              		.syntax unified
 483              		.thumb
 484              		.thumb_func
 485              		.fpu fpv4-sp-d16
 486              		.type	battery_level_start, %function
 487              	battery_level_start:
 488              		@ args = 0, pretend = 0, frame = 0
 489              		@ frame_needed = 1, uses_anonymous_args = 0
 490 0000 80B5     		push	{r7, lr}
 491 0002 82B0     		sub	sp, sp, #8
 492 0004 02AF     		add	r7, sp, #8
 493 0006 0021     		movs	r1, #0
 494 0008 0748     		ldr	r0, .L27
 495 000a FFF7FEFF 		bl	adcStart
 496 000e 0023     		movs	r3, #0
 497 0010 0093     		str	r3, [sp]
 498 0012 064B     		ldr	r3, .L27+4
 499 0014 4022     		movs	r2, #64
 500 0016 4FF41E71 		mov	r1, #632
 501 001a 0548     		ldr	r0, .L27+8
 502 001c FFF7FEFF 		bl	chThdCreateStatic
ARM GAS  /var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s 			page 10


 503 0020 00BF     		nop
 504 0022 BD46     		mov	sp, r7
 505              		@ sp needed
 506 0024 80BD     		pop	{r7, pc}
 507              	.L28:
 508 0026 00BF     		.align	2
 509              	.L27:
 510 0028 00000000 		.word	ADCD3
 511 002c 00000000 		.word	battery_thd
 512 0030 00000000 		.word	battery_thd_wa.12096
 513              		.size	battery_level_start, .-battery_level_start
 514              		.section	.text.get_battery_raw,"ax",%progbits
 515              		.align	1
 516              		.global	get_battery_raw
 517              		.syntax unified
 518              		.thumb
 519              		.thumb_func
 520              		.fpu fpv4-sp-d16
 521              		.type	get_battery_raw, %function
 522              	get_battery_raw:
 523              		@ args = 0, pretend = 0, frame = 0
 524              		@ frame_needed = 1, uses_anonymous_args = 0
 525              		@ link register save eliminated.
 526 0000 80B4     		push	{r7}
 527 0002 00AF     		add	r7, sp, #0
 528 0004 034B     		ldr	r3, .L31
 529 0006 1B89     		ldrh	r3, [r3, #8]
 530 0008 1846     		mov	r0, r3
 531 000a BD46     		mov	sp, r7
 532              		@ sp needed
 533 000c 5DF8047B 		ldr	r7, [sp], #4
 534 0010 7047     		bx	lr
 535              	.L32:
 536 0012 00BF     		.align	2
 537              	.L31:
 538 0014 00000000 		.word	battery_value
 539              		.size	get_battery_raw, .-get_battery_raw
 540              		.section	.text.get_battery_voltage,"ax",%progbits
 541              		.align	1
 542              		.global	get_battery_voltage
 543              		.syntax unified
 544              		.thumb
 545              		.thumb_func
 546              		.fpu fpv4-sp-d16
 547              		.type	get_battery_voltage, %function
 548              	get_battery_voltage:
 549              		@ args = 0, pretend = 0, frame = 0
 550              		@ frame_needed = 1, uses_anonymous_args = 0
 551              		@ link register save eliminated.
 552 0000 80B4     		push	{r7}
 553 0002 00AF     		add	r7, sp, #0
 554 0004 044B     		ldr	r3, .L35
 555 0006 1B68     		ldr	r3, [r3]	@ float
 556 0008 07EE903A 		vmov	s15, r3
 557 000c B0EE670A 		vmov.f32	s0, s15
 558 0010 BD46     		mov	sp, r7
 559              		@ sp needed
ARM GAS  /var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s 			page 11


 560 0012 5DF8047B 		ldr	r7, [sp], #4
 561 0016 7047     		bx	lr
 562              	.L36:
 563              		.align	2
 564              	.L35:
 565 0018 00000000 		.word	battery_value
 566              		.size	get_battery_voltage, .-get_battery_voltage
 567              		.section	.text.get_battery_percentage,"ax",%progbits
 568              		.align	1
 569              		.global	get_battery_percentage
 570              		.syntax unified
 571              		.thumb
 572              		.thumb_func
 573              		.fpu fpv4-sp-d16
 574              		.type	get_battery_percentage, %function
 575              	get_battery_percentage:
 576              		@ args = 0, pretend = 0, frame = 0
 577              		@ frame_needed = 1, uses_anonymous_args = 0
 578              		@ link register save eliminated.
 579 0000 80B4     		push	{r7}
 580 0002 00AF     		add	r7, sp, #0
 581 0004 044B     		ldr	r3, .L39
 582 0006 5B68     		ldr	r3, [r3, #4]	@ float
 583 0008 07EE903A 		vmov	s15, r3
 584 000c B0EE670A 		vmov.f32	s0, s15
 585 0010 BD46     		mov	sp, r7
 586              		@ sp needed
 587 0012 5DF8047B 		ldr	r7, [sp], #4
 588 0016 7047     		bx	lr
 589              	.L40:
 590              		.align	2
 591              	.L39:
 592 0018 00000000 		.word	battery_value
 593              		.size	get_battery_percentage, .-get_battery_percentage
 594              		.section	.text.battery_check,"ax",%progbits
 595              		.align	1
 596              		.global	battery_check
 597              		.syntax unified
 598              		.thumb
 599              		.thumb_func
 600              		.fpu fpv4-sp-d16
 601              		.type	battery_check, %function
 602              	battery_check:
 603              		@ args = 0, pretend = 0, frame = 0
 604              		@ frame_needed = 1, uses_anonymous_args = 0
 605 0000 80B5     		push	{r7, lr}
 606 0002 00AF     		add	r7, sp, #0
 607 0004 0F4B     		ldr	r3, .L47
 608 0006 1B89     		ldrh	r3, [r3, #8]
 609 0008 40F65332 		movw	r2, #2899
 610 000c 9342     		cmp	r3, r2
 611 000e 04D8     		bhi	.L42
 612 0010 0121     		movs	r1, #1
 613 0012 0020     		movs	r0, #0
 614 0014 FFF7FEFF 		bl	set_led
 615 0018 03E0     		b	.L43
 616              	.L42:
ARM GAS  /var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s 			page 12


 617 001a 0021     		movs	r1, #0
 618 001c 0020     		movs	r0, #0
 619 001e FFF7FEFF 		bl	set_led
 620              	.L43:
 621 0022 084B     		ldr	r3, .L47
 622 0024 1B89     		ldrh	r3, [r3, #8]
 623 0026 40F62722 		movw	r2, #2599
 624 002a 9342     		cmp	r3, r2
 625 002c 04D8     		bhi	.L44
 626 002e 0121     		movs	r1, #1
 627 0030 0120     		movs	r0, #1
 628 0032 FFF7FEFF 		bl	set_led
 629 0036 03E0     		b	.L46
 630              	.L44:
 631 0038 0021     		movs	r1, #0
 632 003a 0120     		movs	r0, #1
 633 003c FFF7FEFF 		bl	set_led
 634              	.L46:
 635 0040 00BF     		nop
 636 0042 80BD     		pop	{r7, pc}
 637              	.L48:
 638              		.align	2
 639              	.L47:
 640 0044 00000000 		.word	battery_value
 641              		.size	battery_check, .-battery_check
 642              		.section	.bss.battery_thd_wa.12096,"aw",%nobits
 643              		.align	3
 644              		.type	battery_thd_wa.12096, %object
 645              		.size	battery_thd_wa.12096, 632
 646              	battery_thd_wa.12096:
 647 0000 00000000 		.space	632
 647      00000000 
 647      00000000 
 647      00000000 
 647      00000000 
 648              		.ident	"GCC: (GNU Tools for Arm Embedded Processors 7-2017-q4-major) 7.2.1 20170904 (release) [ARM
ARM GAS  /var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s 			page 13


DEFINED SYMBOLS
                            *ABS*:0000000000000000 battery_level.c
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:15     .text.port_lock:0000000000000000 $t
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:21     .text.port_lock:0000000000000000 port_lock
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:45     .text.port_unlock:0000000000000000 $t
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:51     .text.port_unlock:0000000000000000 port_unlock
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:75     .text.port_lock_from_isr:0000000000000000 $t
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:81     .text.port_lock_from_isr:0000000000000000 port_lock_from_isr
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:91     .text.port_unlock_from_isr:0000000000000000 $t
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:97     .text.port_unlock_from_isr:0000000000000000 port_unlock_from_isr
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:107    .text.chSysLockFromISR:0000000000000000 $t
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:113    .text.chSysLockFromISR:0000000000000000 chSysLockFromISR
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:125    .text.chSysUnlockFromISR:0000000000000000 $t
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:131    .text.chSysUnlockFromISR:0000000000000000 chSysUnlockFromISR
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:143    .text.chRegSetThreadName:0000000000000000 $t
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:149    .text.chRegSetThreadName:0000000000000000 chRegSetThreadName
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:170    .text.chRegSetThreadName:000000000000001c $d
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:173    .text.chBSemWait:0000000000000000 $t
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:179    .text.chBSemWait:0000000000000000 chBSemWait
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:197    .text.chBSemSignalI:0000000000000000 $t
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:203    .text.chBSemSignalI:0000000000000000 chBSemSignalI
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:226    .bss.adc_value:0000000000000000 $d
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:229    .bss.adc_value:0000000000000000 adc_value
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:232    .bss.adc_samples:0000000000000000 $d
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:235    .bss.adc_samples:0000000000000000 adc_samples
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:238    .data.measurement_ready:0000000000000000 $d
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:241    .data.measurement_ready:0000000000000000 measurement_ready
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:246    .bss.battery_value:0000000000000000 $d
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:249    .bss.battery_value:0000000000000000 battery_value
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:252    .rodata.group:0000000000000000 $d
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:255    .rodata.group:0000000000000000 group
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:275    .text.adc_cb:0000000000000000 adc_cb
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:269    .text.adc_cb:0000000000000000 $t
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:333    .text.adc_cb:000000000000006c $d
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:340    .rodata:0000000000000000 $d
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:347    .text.battery_thd:0000000000000000 $t
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:353    .text.battery_thd:0000000000000000 battery_thd
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:462    .text.battery_thd:0000000000000128 $d
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:480    .text.battery_level_start:0000000000000000 $t
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:487    .text.battery_level_start:0000000000000000 battery_level_start
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:510    .text.battery_level_start:0000000000000028 $d
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:646    .bss.battery_thd_wa.12096:0000000000000000 battery_thd_wa.12096
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:515    .text.get_battery_raw:0000000000000000 $t
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:522    .text.get_battery_raw:0000000000000000 get_battery_raw
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:538    .text.get_battery_raw:0000000000000014 $d
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:541    .text.get_battery_voltage:0000000000000000 $t
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:548    .text.get_battery_voltage:0000000000000000 get_battery_voltage
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:565    .text.get_battery_voltage:0000000000000018 $d
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:568    .text.get_battery_percentage:0000000000000000 $t
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:575    .text.get_battery_percentage:0000000000000000 get_battery_percentage
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:592    .text.get_battery_percentage:0000000000000018 $d
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:595    .text.battery_check:0000000000000000 $t
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:602    .text.battery_check:0000000000000000 battery_check
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:640    .text.battery_check:0000000000000044 $d
/var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s:643    .bss.battery_thd_wa.12096:0000000000000000 $d

UNDEFINED SYMBOLS
ARM GAS  /var/folders/d2/nstgp4h54kz7g1l847x_b8wc0000gn/T//ccv8s0jY.s 			page 14


_stats_start_measure_crit_isr
_dbg_check_lock_from_isr
_dbg_check_unlock_from_isr
_stats_stop_measure_crit_isr
ch
chSemWait
chDbgCheckClassI
chSemSignalI
adcStartConversionI
ADCD3
messagebus_topic_init
messagebus_advertise_topic
adcAcquireBus
adcStartConversion
messagebus_topic_publish
chThdSleep
bus
adcStart
chThdCreateStatic
set_led
